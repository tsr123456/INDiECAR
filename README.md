# INDiECAR Model Suite
This repository contains the INDiECAR model suite, a collection of three interrelated models designed to support decarbonization strategies in the cement industry whih was developed for the publication Strunge et al. (in press). "Finding least-cost net-zero CO2e strategies for the European cement industry using geospatial techno-economic modelling", RSC Sustainability. The suite includes tools for transport cost calculation, resource technology network optimization, and cost allocation for decarbonization interventions.

## Acknowledgments
The model is based on the work by Collis, Schomäcker, et al. (INTERNAT-BT; [Collis, J. and R. Schomäcker (2022). "Determining the Production and Transport Cost for H2 on a Global Scale." Frontiers in Energy Research 10)](https://doi.org/10.3389/fenrg.2022.909298), and uses the RTN formulation (INDiECAR-RTN) described by Sunny et al. ([Sunny, N., et al. (2020). "What is needed to deliver carbon-neutral heat using hydrogen and CCS?" Energy & Environmental Science 13(11): 4204-4224)](https://doi.org/10.1039/D0EE02016H) We thank the authors and organizations for their contributions to the foundational methodologies and datasets used in this work.

The RTN formulation was Elegancy GitHub chain tool. The unmodified source code can be accessed here: https://github.com/act-elegancy/chain_tool
The INTERNAT-BT was in parts based on the shapefile to network package. The unmodified source code can be accessed here: https://github.com/Garvit244/Shapefile_to_Network

Both packages were licenesed with the MIT license, which allows "to use, copy, modify, merge, publish, distribute" the software.

## Model Structure
The model suite consists of three primary components:

1. International Bulk Transport Model (INTERNAT-BT)
The INTERNAT-BT model calculates transportation costs for bulk materials over various modes of transport, such as shipping, rail, and road, to identify the most cost-effective transport options. The model uses shapefiles for European railways, shipping routes, and ports to determine the shortest paths, employing the Dijkstra algorithm and OpenStreetMap API integration for accuracy.

2. Industrial Decarbonisation Resource Technology Network Model (INDiECAR-RTN)
The INDiECAR-RTN model is based on a Resource Technology Network (RTN) formulation, which aims to minimize the total cost of cement production while achieving a specific CO2 reduction target. It considers multiple interventions, such as installing CO2 capture technologies, creating CO2 storage sites, and building infrastructure for CO2 transport. The model balances resources within each grid cell and determines the optimal technology and infrastructure choices.

3. Cost Allocator (COSTALLO)
The COSTALLO model allocates costs generated by the INDiECAR-RTN model to individual cement plants, considering the costs of CO2 transport, storage, and direct air capture. This allocation is based on the amount of captured CO2 and the distance traveled via pipelines or other transport methods.

## Requirements
Python 3.9
Jupyter Notebook
CPLEX Solver (commercial solver for mixed-integer programming)

## Major Python Packages Used
- numpy
- pandas
- networkx
- geopandas
- shapely
- requests (for OpenStreetMap API integration)
- matplotlib (for visualizations)

## Installation#
1. Set up a local copy of the this github repository on your computer. Either use github desktop client or a git bash window and the clone command.
2. Install CPLEX solver, which can be made available for free for academic use on the IBM website: https://www.ibm.com/academic/
3. Install the RTN model as follows:
   1. Open an Anaconda command prompt (Start --> Anaconda3 --> ....)
   2. In the prompt, navigate to the local path of the the *INDiECAR-RTN* of step 1 by typing
      ``cd "<your path here>/INDiECAR-RTN"``, Note: you should be on the top layer of the folder, i.e. you should see a README file, the LICENSE, and a setup.py file.
   3. Install the python environment *INDiECAR-RTN*, by typing the following into the command prompt: ``conda env create -f environment.yml``
   4. Install the *IDRIC_toolkit* as a package by typing the following into the command prompt:``python -m pip install -e .``
      
4. Similarly install the python environment *geosptial_environment* to run INDiECAR-BT and COSTALLO:
   1. Open an Anaconda command prompt (Start --> Anaconda3 --> ....)
   2. In the prompt, navigate to the local path of the the *INDiECAR-RTN* of step 1 by typing
      ``cd "<your path here>/INDiECAR-BT"``
   3. Install the python environment *INDiECAR-RTN*, by typing the following into the command prompt: ``conda env create -f environment.yaml``
 

At this point, you should be set up to start working on the IDRIC toolkit and run simulations. You can navigate to the folder *notebooks* in each model to run the different Jypiter Notebooks. 

## Running the Models
The models are structured as three separate components, each with its own Jupyter notebooks for running simulations and analyses:

### INTERNAT-BT Model:

- Navigate to the INDiECAR-BT/Notebooks directory.
- Open the relevant Jupyter notebook (e.g., transport_cost_calculation.ipynb) to compute transport costs for different feedstocks using the available shapefiles for rail, road, and shipping routes.
- Execute the notebook cells sequentially to run the model and generate the results.

### INDiECAR-RTN Model:

- Navigate to the INDiECAR-RTN/notebooks directory.
- Open the appropriate Jupyter notebook (e.g., optimization_framework.ipynb) to perform optimization based on a given emission reduction target and output the least-cost decarbonization strategies.
- Execute the notebook cells to run the optimization model.

### COSTALLO Model:

- Navigate to the COSTALLO/notebooks directory.
- Open the relevant Jupyter notebook (e.g., cost_allocation.ipynb) to allocate costs from the INDiECAR-RTN model to individual cement plants.
- Run the notebook cells to perform the cost allocation.
- Running Jupyter Notebooks


## Results
The results will be saved in the Results directory of each component, including:

- Transport Costs: Computed costs for different transport modes and routes.
- Optimized CO2 Reduction Strategies: Generated by the INDiECAR-RTN model.
- Cost Allocation Reports: Distribution of costs to individual cement plants.

## License
MIT License

## Contact
For any questions or feedback, please contact [tms4@hw.ac.uk].
